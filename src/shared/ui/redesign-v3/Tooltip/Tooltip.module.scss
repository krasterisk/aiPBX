@import '@/app/styles/variables/mixins';

.Tooltip {
    display: inline-flex;
    cursor: help;
}

.tooltipPortal {
    position: absolute;
    z-index: 99999;
    pointer-events: none;
    animation: tooltipFadeIn 0.2s var(--ease-out);

    // Предотвращаем обрезание
    max-width: 280px;

    @include mobile {
        max-width: 240px;
        pointer-events: auto; // На мобильных разрешаем взаимодействие
    }
}

.tooltipInner {
    padding: var(--space-2) var(--space-3);
    background: var(--card-bg);
    border: 1px solid rgba(94, 211, 243, 0.3);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg), var(--shadow-accent-sm);
    color: var(--text-redesigned);
    font-size: var(--font-size-s);
    line-height: 1.4;
    font-weight: 500;
    backdrop-filter: var(--glass-blur-md);
    white-space: normal;
    word-wrap: break-word;

    @include mobile {
        font-size: 13px;
        padding: var(--space-2);
    }
}

.tooltipArrow {
    position: absolute;
    width: 8px;
    height: 8px;
    background: var(--card-bg);
    border: 1px solid rgba(94, 211, 243, 0.3);
    transform: rotate(45deg);

    @include mobile {
        width: 6px;
        height: 6px;
    }
}

// Placement variants - используют transform для центрирования
.top {
    transform: translate(-50%, -100%);

    .tooltipArrow {
        bottom: -5px;
        left: 50%;
        transform: translateX(-50%) rotate(45deg);
        border-top: none;
        border-left: none;
    }
}

.bottom {
    transform: translate(-50%, 0);

    .tooltipArrow {
        top: -5px;
        left: 50%;
        transform: translateX(-50%) rotate(45deg);
        border-bottom: none;
        border-right: none;
    }
}

.left {
    transform: translate(-100%, -50%);

    .tooltipArrow {
        right: -5px;
        top: 50%;
        transform: translateY(-50%) rotate(45deg);
        border-left: none;
        border-bottom: none;
    }
}

.right {
    transform: translate(0, -50%);

    .tooltipArrow {
        left: -5px;
        top: 50%;
        transform: translateY(-50%) rotate(45deg);
        border-right: none;
        border-top: none;
    }
}

// Animations
@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translate(-50%, calc(-100% - 4px));
    }

    to {
        opacity: 1;
        transform: translate(-50%, -100%);
    }
}

// Mobile specific adjustments
@include mobile {
    .tooltipPortal {

        // На мобильных используем фиксированное позиционирование для лучшей видимости
        &.top,
        &.bottom {
            // Предотвращаем выход за пределы экрана
            max-width: calc(100vw - 32px);
        }

        &.left,
        &.right {
            // На мобильных показываем сверху для лучшей видимости
            transform: translate(-50%, -100%);

            .tooltipArrow {
                bottom: -5px;
                left: 50%;
                right: auto;
                top: auto;
                transform: translateX(-50%) rotate(45deg);
                border-top: none;
                border-left: none;
                border-bottom: 1px solid rgba(94, 211, 243, 0.3);
                border-right: 1px solid rgba(94, 211, 243, 0.3);
            }
        }
    }
}