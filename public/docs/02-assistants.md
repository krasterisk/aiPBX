# Ассистенты — полное руководство

> Ассистент — это ваш виртуальный сотрудник. Он отвечает на звонки, ведёт диалог с клиентами и выполняет действия. В этом разделе вы узнаете, как создать, настроить и опубликовать идеального ассистента для вашего бизнеса.

---

## Содержание

1. [Создание ассистента](#создание-ассистента)
2. [Форма настройки — обзор](#форма-настройки-обзор)
3. [Инструкция (промпт) — сердце ассистента](#инструкция-промпт-сердце-ассистента)
4. [Основные настройки](#основные-настройки)
5. [Модель ИИ — какую выбрать?](#модель-ии-какую-выбрать)
6. [Голос — как звучит ваш ассистент](#голос-как-звучит-ваш-ассистент)
7. [Параметры модели и VAD](#параметры-модели-и-vad)
8. [Гайд по написанию промптов](#гайд-по-написанию-промптов)
9. [Готовые примеры промптов](#готовые-примеры-промптов)

---

## Создание ассистента

На странице **«Ассистенты»** вы увидите список всех ваших ассистентов. Нажмите кнопку **«＋»** в правом верхнем углу, чтобы создать нового.

<div class="form-mockup form-mockup-wide">
  <div class="form-mockup-title">Ассистенты</div>
  <div class="form-mockup-list-item">
    <span class="item-name">Бот поддержки клиентов</span>
    <span class="form-mockup-badge badge-success">Активен</span>
  </div>
  <div class="form-mockup-card">
    <div class="card-desc">gpt-realtime · alloy · 3 функции</div>
    <div class="card-meta">Основной бот для обработки входящих</div>
  </div>
  <div class="form-mockup-list-item">
    <span class="item-name">Оператор пиццерии</span>
    <span class="form-mockup-badge badge-warning">Черновик</span>
  </div>
  <div class="form-mockup-card">
    <div class="card-desc">gpt-realtime · shimmer · 2 функции</div>
    <div class="card-meta">Принимает заказы и уточняет адрес</div>
  </div>
</div>

Также при создании можно использовать **готовый шаблон**. Если в URL передан параметр `?template=repair` (например, через онбординг), система автоматически загрузит промпт шаблона.

---

## Форма настройки — обзор

Форма ассистента разделена на **две колонки**:

<div class="form-mockup form-mockup-wide">
  <div class="form-mockup-title">Настройка ассистента</div>
  <div class="form-mockup-row" style="align-items: flex-start;">
    <div style="flex: 3;">
      <div class="form-mockup-section-title">Инструкция (промпт)</div>
      <div class="form-mockup-textarea" style="min-height: 180px;">Ты — оператор сервисного центра «ТехноМастер».

Твоя задача:
1. Приветствовать клиента
2. Выяснить проблему
3. Записать данные
...</div>
      <div style="margin-top: 12px;">
        <span class="form-mockup-btn form-mockup-btn-secondary">Сгенерировать</span>
      </div>
    </div>
    <div style="flex: 2;">
      <div class="form-mockup-section-title">Основные настройки</div>
      <div class="form-mockup-field" data-required>
        <label>Наименование</label>
        <div class="form-mockup-input">Бот поддержки</div>
      </div>
      <div class="form-mockup-field" data-required>
        <label>Модель</label>
        <div class="form-mockup-select">gpt-realtime ▾</div>
      </div>
      <div class="form-mockup-field" data-required>
        <label>Голос</label>
        <div class="form-mockup-select">alloy ▾</div>
      </div>
      <div class="form-mockup-field">
        <label>Функции</label>
        <div class="form-mockup-chips">
          <span class="form-mockup-chip selected">book_appointment ✕</span>
          <span class="form-mockup-chip selected">check_status ✕</span>
        </div>
      </div>
      <div class="form-mockup-toggle active">
        <div class="toggle-track"><div class="toggle-thumb"></div></div>
        <span class="toggle-label">Аналитика</span>
      </div>
      <div class="form-mockup-field">
        <label>Комментарий</label>
        <div class="form-mockup-input">Для отдела продаж</div>
      </div>
      <div class="form-mockup-divider"></div>
      <div class="form-mockup-section-title">Параметры модели</div>
      <div class="form-mockup-field">
        <label>Температура: 0.8</label>
        <div class="form-mockup-slider">
          <div class="slider-track">
            <div class="slider-fill" style="width: 40%;"></div>
            <div class="slider-thumb" style="left: 40%;"></div>
          </div>
          <div class="slider-labels"><span>0.6</span><span>1.2</span></div>
        </div>
      </div>
      <div class="form-mockup-field">
        <label>Время простоя: 30 сек</label>
        <div class="form-mockup-slider">
          <div class="slider-track">
            <div class="slider-fill" style="width: 22%;"></div>
            <div class="slider-thumb" style="left: 22%;"></div>
          </div>
          <div class="slider-labels"><span>5</span><span>120</span></div>
        </div>
      </div>
      <div class="form-mockup-field">
        <label>Порог VAD: 0.5</label>
        <div class="form-mockup-slider">
          <div class="slider-track">
            <div class="slider-fill" style="width: 50%;"></div>
            <div class="slider-thumb" style="left: 50%;"></div>
          </div>
          <div class="slider-labels"><span>0.0</span><span>1.0</span></div>
        </div>
      </div>
    </div>
  </div>
</div>

На мобильных устройствах колонки располагаются вертикально — сначала инструкция, затем настройки.

---

## Инструкция (промпт) — сердце ассистента

**Инструкция** (она же «системный промпт») — это самое важное поле при настройке ассистента. Именно этот текст определяет, КАК ваш ассистент будет вести диалог.

### Что это и зачем?

Представьте, что вы нанимаете нового сотрудника. Вы не просто говорите «работай» — вы даёте ему **должностную инструкцию**: кто он, чем занимается, какие задачи выполняет, чего делать нельзя. Промпт — это та самая «должностная инструкция» для вашего ИИ-оператора.

Модель ИИ получает этот текст **перед каждым разговором** и строит всё своё поведение на его основе.

### Кнопка «Сгенерировать»

Не знаете, что написать? Нажмите кнопку **«Сгенерировать»**:

<div class="form-mockup">
  <div class="form-mockup-title">Генерация промпта</div>
  <div class="form-mockup-field">
    <label>Опишите задачу в свободной форме</label>
    <div class="form-mockup-textarea" style="min-height: 80px;">Оператор пиццерии, принимает заказы, уточняет адрес и размер пиццы, предлагает напитки, называет итоговую сумму</div>
  </div>
  <div class="form-mockup-actions">
    <div class="form-mockup-btn form-mockup-btn-primary">Сгенерировать промпт</div>
  </div>
</div>

ИИ преобразует ваше описание в профессиональный, структурированный промпт с ролью, задачами, ограничениями и тоном.

---

## Основные настройки

### Таблица полей основной карточки

| Поле | Описание | Пример |
|------|----------|--------|
| **Наименование** | Имя ассистента для внутренней идентификации. Отображается в списке ассистентов, отчётах и фильтрах. Выбирайте понятное имя. | `Бот поддержки клиентов` |
| **Модель** | Языковая модель ИИ. От неё зависит качество понимания, скорость ответа и стоимость. Подробнее ниже. | `gpt-realtime` |
| **Голос** | Голосовая персона — как ассистент звучит. Разные голоса отличаются тоном, полом и акцентом. | `alloy`, `shimmer`, `echo` |
| **Функции** | Список подключённых инструментов (функций). Ассистент сможет вызывать эти функции во время разговора. | `book_appointment`, `check_status` |
| **MCP Серверы** | Подключённые MCP серверы (Telegram, Gmail и др.). Позволяют ассистенту взаимодействовать с внешними сервисами. | `Telegram Bot`, `Google Calendar` |
| **Аналитика** | Если включена — после каждого звонка ИИ автоматически генерирует аналитику: тональность разговора, краткое резюме, тему обращения. | Включено |
| **Комментарий** | Внутренняя заметка для вашей команды. Не влияет на поведение ассистента, но помогает организовать работу. | `Тестовый, не публиковать` |

---

## Модель ИИ — какую выбрать?

Модель — это «мозг» вашего ассистента. От выбора модели зависит, насколько умным, быстрым и дорогим будет ваш оператор.

### Доступные модели

| Модель | Провайдер | Плюсы | Минусы | Для кого |
|--------|----------|-------|--------|----------|
| **gpt-realtime** | OpenAI | Глубокое понимание контекста, сложные диалоги, нативный голосовой ввод/вывод | Дороже, чуть медленнее | Сложные сценарии: медицина, юридика, финансы |
| **qwen-realtime** | Alibaba | Быстрее, значительно дешевле, хорошая поддержка CJK | Менее «творческий» | Простые задачи, высокий объём звонков |
| **yandex-realtime** | Яндекс | Отличная поддержка русского языка, серверы в РФ, соответствие 152-ФЗ | Ограничен русским/английским | Пользователи в РФ, госструктуры, требования к локализации данных |

### Как выбрать?

<div class="form-mockup">
  <div class="form-mockup-title">Дерево выбора модели</div>
  <div class="form-mockup-card">
    <div class="card-title">Ваш сценарий сложный? (медицина, юридика, техподдержка)</div>
    <div class="card-desc">→ <strong>gpt-realtime</strong></div>
  </div>
  <div class="form-mockup-card">
    <div class="card-title">Стандартные задачи: записи, заказы, FAQ</div>
    <div class="card-desc">
      Важна экономия? → <strong>qwen-realtime</strong><br>
      Важно качество? → <strong>gpt-realtime</strong>
    </div>
  </div>
  <div class="form-mockup-card">
    <div class="card-title">Данные должны храниться в РФ?</div>
    <div class="card-desc">→ <strong>yandex-realtime</strong></div>
  </div>
</div>

> Совет: Начните с gpt-realtime для отладки промпта, затем переключитесь на более дешёвую модель (qwen-realtime), если качество устраивает.

### Важно: смена модели сбрасывает голос

При смене модели поле «Голос» очищается, т.к. разные модели поддерживают разные голоса. Выберите голос заново после смены модели.

---

## Голос — как звучит ваш ассистент

Голос определяет «личность» вашего ассистента при разговоре. Это **не робот** — голоса звучат естественно, с интонациями и паузами.

### Как выбрать голос?

Набор доступных голосов зависит от выбранной модели. Вот ориентиры:

| Голос | Характеристика | Подходит для |
|-------|---------------|-------------|
| **alloy** | Нейтральный, универсальный | Техподдержка, деловые звонки |
| **echo** | Глубокий, спокойный | Банки, юридические услуги |
| **shimmer** | Мягкий, приветливый | Салоны красоты, клиники |
| **ash** | Энергичный, молодой | Доставка, развлечения |
| **coral** | Тёплый, женский | Ресепшн, гостиницы |

> Совет: Протестируйте несколько голосов в Песочнице — там можно менять голос и сразу слышать разницу.

---

## Параметры модели и VAD

Эти настройки влияют на «характер» ассистента и качество распознавания речи.

### Карточка параметров

<div class="form-mockup">
  <div class="form-mockup-title">Параметры модели</div>
  <div class="form-mockup-field">
    <label>Температура: 0.8</label>
    <div class="form-mockup-slider">
      <div class="slider-track">
        <div class="slider-fill" style="width: 40%;"></div>
        <div class="slider-thumb" style="left: 40%;"></div>
      </div>
      <div class="slider-labels"><span>0.6 (точные)</span><span>1.2 (творческие)</span></div>
    </div>
  </div>
  <div class="form-mockup-field">
    <label>Время простоя (сек): 30</label>
    <div class="form-mockup-slider">
      <div class="slider-track">
        <div class="slider-fill" style="width: 22%;"></div>
        <div class="slider-thumb" style="left: 22%;"></div>
      </div>
      <div class="slider-labels"><span>5</span><span>120</span></div>
    </div>
  </div>
  <div class="form-mockup-divider"></div>
  <div class="form-mockup-section-title">VAD (обнаружение голоса)</div>
  <div class="form-mockup-field">
    <label>Порог обнаружения речи: 0.5</label>
    <div class="form-mockup-slider">
      <div class="slider-track">
        <div class="slider-fill" style="width: 50%;"></div>
        <div class="slider-thumb" style="left: 50%;"></div>
      </div>
      <div class="slider-labels"><span>0.0 (чувствительный)</span><span>1.0 (строгий)</span></div>
    </div>
  </div>
  <div class="form-mockup-field">
    <label>Длительность включаемого аудио: 300 мс</label>
    <div class="form-mockup-slider">
      <div class="slider-track">
        <div class="slider-fill" style="width: 30%;"></div>
        <div class="slider-thumb" style="left: 30%;"></div>
      </div>
      <div class="slider-labels"><span>0</span><span>1000</span></div>
    </div>
  </div>
  <div class="form-mockup-field">
    <label>Длительность тишины: 500 мс</label>
    <div class="form-mockup-slider">
      <div class="slider-track">
        <div class="slider-fill" style="width: 26%;"></div>
        <div class="slider-thumb" style="left: 26%;"></div>
      </div>
      <div class="slider-labels"><span>100</span><span>2000</span></div>
    </div>
  </div>
</div>

### Подробное описание каждого параметра

| Параметр | Что делает | Рекомендация | Диапазон |
|----------|-----------|--------------|----------|
| **Температура** | Контролирует «креативность» ответов. Низкая = точные, предсказуемые ответы. Высокая = разнообразные, но менее стабильные. | **0.8** для большинства задач. 0.6 для медицины/финансов, 1.0 для творческих задач | 0.6 — 1.2 |
| **Время простоя** | Через сколько секунд молчания сессия автоматически завершится. Если клиент не говорит 30 секунд — разговор окончен. | **30 сек** для обычных звонков, 60+ для сложных консультаций | 5 — 120 |
| **Порог VAD** | Минимальная «уверенность» системы, что человек начал говорить. Высокий порог = меньше ложных срабатываний (фоновый шум не распознаётся как речь). | **0.5** — золотая середина | 0.0 — 1.0 |
| **Включаемое аудио** | Сколько миллисекунд аудио ДО момента срабатывания VAD включить в распознавание. Помогает не «проглотить» начало фразы клиента. | **300 мс** | 0 — 1000 |
| **Длительность тишины** | Сколько миллисекунд тишины ждать после окончания речи, чтобы понять: клиент закончил говорить. Слишком мало — ассистент «перебивает». Слишком много — неестественные паузы. | **500 мс** | 100 — 2000 |

### Что такое VAD и зачем он нужен?

**VAD** (Voice Activity Detection) — это технология, которая определяет, когда человек **начинает говорить** и когда **замолкает**. Без VAD ассистент не знал бы, когда слушать, а когда отвечать.

Представьте разговор двух людей: один говорит, второй слушает и ждёт паузу, чтобы ответить. VAD делает то же самое — слушает поток аудио и определяет моменты речи и тишины.

**Пример проблем с плохо настроенным VAD:**
- Порог слишком низкий → фоновый шум (телевизор, улица) воспринимается как речь → ассистент «перебивает»
- Порог слишком высокий → тихую речь не слышит → ассистент не реагирует
- Тишина слишком короткая → ассистент начинает отвечать, пока клиент ещё думает
- Тишина слишком длинная → неестественные паузы, клиент думает что связь оборвалась

---

---

## Гайд по написанию промптов

### Структура идеального промпта

Каждый хороший промпт содержит **5 элементов**:

<div class="form-mockup">
  <div class="form-mockup-title">Структура промпта</div>
  <div class="form-mockup-card">
    <div class="card-title">1. Роль</div>
    <div class="card-desc">Кто ты? — «Ты — оператор пиццерии»</div>
  </div>
  <div class="form-mockup-card">
    <div class="card-title">2. Контекст</div>
    <div class="card-desc">Где ты работаешь? — «Пиццерия "Белла", Москва»</div>
  </div>
  <div class="form-mockup-card">
    <div class="card-title">3. Задачи</div>
    <div class="card-desc">Что ты делаешь? — Пронумерованный список</div>
  </div>
  <div class="form-mockup-card">
    <div class="card-title">4. Ограничения</div>
    <div class="card-desc">Чего НЕ делаешь? — Чёткие границы компетенции</div>
  </div>
  <div class="form-mockup-card">
    <div class="card-title">5. Тон</div>
    <div class="card-desc">Как ты общаешься? — Формально / дружелюбно</div>
  </div>
</div>

### 10 правил хорошего промпта

1. **Будьте конкретны.** Вместо «помогай клиентам» напишите «помоги записаться на приём, узнав дату, время и имя»
2. **Нумеруйте задачи.** Это помогает модели выполнять их последовательно
3. **Указывайте ограничения.** Ассистент без ограничений ответит на ЛЮБОЙ вопрос — даже не по теме
4. **Упоминайте функции.** Если подключены функции (book_appointment и т.д.), укажите их по имени в промпте
5. **Определите тон.** «На вы» или «на ты»? Формально или дружелюбно?
6. **Укажите приветствие.** Как ассистент начнёт разговор? «Здравствуйте, пиццерия Белла!»
7. **Пропишите сценарий «не знаю».** Что делать, если вопрос не по теме?
8. **Добавьте данные.** Адрес, часы работы, цены — всё, что может понадобиться
9. **Укажите когда завершать.** «После записи попрощайся и заверши звонок»
10. **Тестируйте и улучшайте.** Каждый промпт надо проверять в Песочнице

---

## Готовые примеры промптов

### Пример 1: Сервисный центр по ремонту техники

```text
Ты — оператор сервисного центра по ремонту бытовой техники «ТехноМастер».

Твоя задача:
1. Приветствовать клиента и выяснить, какая техника вышла из строя.
2. Уточнить марку и модель устройства.
3. Узнать характер неисправности (не включается, шумит, протекает и т.д.).
4. Предложить удобное время для визита мастера.
5. Записать контактные данные клиента (имя, телефон, адрес).

Ограничения:
- Не называй стоимость ремонта — скажи, что мастер определит на месте.
- Если техника старше 15 лет, вежливо предложи рассмотреть покупку новой.
- Работай только с бытовой техникой. На другие вопросы — «Это не в моей компетенции».

Тон: дружелюбный, профессиональный. Обращайся на «вы».
```

### Пример 2: Пиццерия с доставкой

```text
Ты — оператор пиццерии «Пицца Белла». Принимаешь заказы по телефону.

Твоя задача:
1. Приветствовать клиента.
2. Принять заказ: узнать какую пиццу, размер (25см / 30см / 35см), количество.
3. Предложить дополнительно: напитки, соусы, десерты.
4. Уточнить способ получения: доставка или самовывоз.
5. При доставке — узнать адрес, подъезд, этаж, домофон.
6. Назвать итоговую сумму и время ожидания.

Меню (используй функцию get_menu для актуального меню).

Ограничения:
- Минимальная сумма заказа на доставку — 500 руб.
- Радиус доставки — 5 км. Если адрес дальше, предложи самовывоз.
- Время доставки: 40-60 минут.

Тон: весёлый, энергичный. Обращайся на «ты».
```

### Пример 3: Стоматологическая клиника

```text
Ты — администратор стоматологической клиники «Дентал Плюс».

Твоя задача:
1. Узнать, первичный это визит или повторный.
2. Уточнить причину обращения (боль, профилактика, отбеливание и т.д.).
3. Предложить свободные даты и время (используй функцию check_schedule).
4. Записать пациента (используй функцию book_appointment).
5. Напомнить о необходимости взять паспорт и полис ОМС.

Важно:
- Если пациент описывает острую боль — предложи ближайшее доступное время.
- Не ставь диагнозы и не давай медицинских рекомендаций.
- Если спрашивают о ценах — назови диапазон, уточни что точную стоимость
  определит врач.

Тон: спокойный, заботливый, профессиональный.
```

### Пример 4: Ресепшн отеля

```text
Ты — ресепшн-бот отеля «Grand Palace Hotel».

Твоя задача:
1. Приветствовать гостя и узнать цель звонка.
2. Если бронирование — узнать даты заезда/выезда, количество гостей, тип номера.
3. Проверить доступность (используй функцию check_availability).
4. Озвучить стоимость за период и условия.
5. Оформить бронирование (используй функцию create_booking).

Типы номеров:
- Стандарт (от 4500 руб/ночь)
- Комфорт (от 6500 руб/ночь)
- Люкс (от 12000 руб/ночь)

Ограничения:
- Заезд с 14:00, выезд до 12:00.
- Дети до 7 лет — бесплатно на существующем месте.
- Отмена бронирования бесплатно за 48 часов.

Тон: элегантный, гостеприимный. Обращайся на «Вы».
```

### Пример 5: Техническая поддержка SaaS

```text
Ты — специалист первой линии техподдержки SaaS-платформы «CloudBase».

Твоя задача:
1. Идентифицировать пользователя (запросить email аккаунта).
2. Узнать суть проблемы.
3. Попытаться решить типовые проблемы:
   - Не могу войти → предложить сброс пароля (функция reset_password).
   - Медленная работа → уточнить браузер, предложить очистить кеш.
   - Ошибка при оплате → проверить статус платежа (функция check_payment).
4. Если проблема нетиповая — создать тикет (функция create_ticket).

Ограничения:
- Не имеешь доступа к паролям пользователей.
- Не можешь отменять подписки — только переводить на отдел продаж.
- Время ответа тикета: до 24 часов в будни.

Тон: терпеливый, технически грамотный. Избегай сложных терминов.
```

---

*Предыдущий раздел: [Быстрый старт](./01-getting-started.md) · Следующий раздел: [Функции (Tools) →](./03-tools.md)*
